<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quebra-Cabe√ßa Simples</title>
<style>
  body {
    font-family: 'Comic Sans MS', 'Baloo', Arial, sans-serif;
    background: #f7f9fc;
    color: #333;
    text-align: center;
    margin: 0; padding: 1.5rem;
  }
  h1 {
    color: #e67e22;
    margin-bottom: 1rem;
    text-shadow: 1px 1px 3px #d37a14;
  }
  #quebra-cabeca {
    width: 320px;
    height: 320px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 5px;
    user-select: none;
  }
  .peca {
    background-image: url('https://i.imgur.com/1Q9Z1Z9.jpg');
    background-size: 300% 300%;
    border-radius: 12px;
    cursor: grab;
    border: 2px solid transparent;
  }
  .peca.dragging {
    opacity: 0.7;
    border-color: #27ae60;
  }
  button {
    margin-top: 25px;
    padding: 1rem 2rem;
    background: #e67e22;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    color: white;
    font-size: 1.15rem;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #d96613;
  }
</style>
</head>
<body>
  <h1>Quebra-Cabe√ßa Simples üß©</h1>
  <div id="quebra-cabeca"></div>
  <button onclick="embaralhar()">Embaralhar Pe√ßas</button>

  <script>
    const quebraCabeca = document.getElementById('quebra-cabeca');
    const tamanho = 3; // 3x3 pe√ßas
    let pecas = [];

    // Cria pe√ßas com background posicionado
    function criarPecas() {
      pecas = [];
      quebraCabeca.innerHTML = '';
      for(let i=0; i<tamanho*tamanho; i++) {
        let peca = document.createElement('div');
        peca.classList.add('peca');
        // Calcula posi√ß√£o na imagem (zoom da imagem 300%)
        let x = (i % tamanho) * 100;
        let y = Math.floor(i / tamanho) * 100;
        peca.style.backgroundPosition = `-${x}% -${y}%`;
        peca.setAttribute('data-posicao', i);
        peca.setAttribute('draggable', true);
        quebraCabeca.appendChild(peca);
        pecas.push(peca);
      }
    }

    // Arrastar e soltar
    let arrastandoPeca = null;

    quebraCabeca.addEventListener('dragstart', (e) => {
      arrastandoPeca = e.target;
      e.target.classList.add('dragging');
    });
    quebraCabeca.addEventListener('dragend', (e) => {
      e.target.classList.remove('dragging');
      arrastandoPeca = null;
    });

    quebraCabeca.addEventListener('dragover', (e) => {
      e.preventDefault();
      const alvo = e.target;
      if(alvo.classList.contains('peca') && alvo !== arrastandoPeca) {
        quebraCabeca.insertBefore(arrastandoPeca, alvo.nextSibling);
      }
    });

    function embaralhar() {
      for (let i = quebraCabeca.children.length; i >= 0; i--) {
        quebraCabeca.appendChild(quebraCabeca.children[Math.random() * i | 0]);
      }
    }

    criarPecas();
  </script>
</body>
</html>
