<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ratinho Aventureiro</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(180deg, #a8e6cf, #dcedc1);
      height: 100vh;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      touch-action: none;
    }

    canvas {
      background-color: #fff;
      border: 3px solid #555;
      border-radius: 20px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Ajuste de tamanho para celular
    function ajustarCanvas() {
      canvas.width = window.innerWidth * 0.9;
      canvas.height = window.innerHeight * 0.7;
    }
    ajustarCanvas();
    window.addEventListener("resize", ajustarCanvas);

    // Ratinho
    const ratinho = {
      x: 100,
      y: 100,
      tamanho: 40,
      velocidade: 5,
      dx: 0,
      dy: 0
    };

    // Função de desenho
    function desenharRatinho() {
      ctx.beginPath();
      ctx.fillStyle = "#555";
      ctx.arc(ratinho.x, ratinho.y, ratinho.tamanho / 2, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();

      // Orelhas
      ctx.beginPath();
      ctx.fillStyle = "#777";
      ctx.arc(ratinho.x - 12, ratinho.y - 15, 8, 0, Math.PI * 2);
      ctx.arc(ratinho.x + 12, ratinho.y - 15, 8, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();

      // Olhos
      ctx.beginPath();
      ctx.fillStyle = "#fff";
      ctx.arc(ratinho.x - 5, ratinho.y - 3, 3, 0, Math.PI * 2);
      ctx.arc(ratinho.x + 5, ratinho.y - 3, 3, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();

      // Focinho
      ctx.beginPath();
      ctx.fillStyle = "#f66";
      ctx.arc(ratinho.x, ratinho.y + 10, 4, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();
    }

    // Movimento
    function moverRatinho() {
      ratinho.x += ratinho.dx;
      ratinho.y += ratinho.dy;

      // Limites da tela
      if (ratinho.x - ratinho.tamanho / 2 < 0) ratinho.x = ratinho.tamanho / 2;
      if (ratinho.y - ratinho.tamanho / 2 < 0) ratinho.y = ratinho.tamanho / 2;
      if (ratinho.x + ratinho.tamanho / 2 > canvas.width) ratinho.x = canvas.width - ratinho.tamanho / 2;
      if (ratinho.y + ratinho.tamanho / 2 > canvas.height) ratinho.y = canvas.height - ratinho.tamanho / 2;
    }

    // Atualizar
    function atualizar() {
      // Corrigido: limpa o canvas a cada frame, impedindo o "rastro"
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      moverRatinho();
      desenharRatinho();

      requestAnimationFrame(atualizar);
    }

    atualizar();

    // Controles
    window.addEventListener("keydown", (e) => {
      switch (e.key) {
        case "ArrowUp": ratinho.dy = -ratinho.velocidade; break;
        case "ArrowDown": ratinho.dy = ratinho.velocidade; break;
        case "ArrowLeft": ratinho.dx = -ratinho.velocidade; break;
        case "ArrowRight": ratinho.dx = ratinho.velocidade; break;
      }
    });

    window.addEventListener("keyup", (e) => {
      switch (e.key) {
        case "ArrowUp":
        case "ArrowDown": ratinho.dy = 0; break;
        case "ArrowLeft":
        case "ArrowRight": ratinho.dx = 0; break;
      }
    });

    // Toques na tela (para celular)
    let toqueInicial = null;

    canvas.addEventListener("touchstart", (e) => {
      toqueInicial = e.touches[0];
    });

    canvas.addEventListener("touchmove", (e) => {
      if (!toqueInicial) return;

      let toqueAtual = e.touches[0];
      let diffX = toqueAtual.clientX - toqueInicial.clientX;
      let diffY = toqueAtual.clientY - toqueInicial.clientY;

      ratinho.dx = diffX > 20 ? ratinho.velocidade : diffX < -20 ? -ratinho.velocidade : 0;
      ratinho.dy = diffY > 20 ? ratinho.velocidade : diffY < -20 ? -ratinho.velocidade : 0;
    });

    canvas.addEventListener("touchend", () => {
      toqueInicial = null;
      ratinho.dx = 0;
      ratinho.dy = 0;
    });
  </script>
</body>
</html>
