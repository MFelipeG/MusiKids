<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Musikids Fun - Jogo de Ligar Imagens</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Baloo+2&display=swap');
    body {
    margin: 0; padding: 0;
    font-family: 'Baloo 2', cursive, Arial, sans-serif;
    background: linear-gradient(135deg, #f7f7ff, #ffd3e4);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    user-select: none;
  }
  #btn-menu {
    position: fixed;
    top: 15px;
    left: 15px;
    padding: 14px 24px;
    background: #a1d578;
    color: #214d0d;
    border-radius: 20px;
    font-weight: 900;
    box-shadow: 0 0 20px #a1d578aa;
    cursor: pointer;
    border: none;
    transition: background .3s;
    z-index: 1000;
  }
  #btn-menu:hover {
    background: #68922b;
    color: white;
  }
  header {
    margin: 65px 0 14px 0;
    font-weight: 900;
    font-size: 1.35rem;
    color: #d63a6d;
    letter-spacing: 1px;
  }
  #game-container {
    max-width: 900px;
    width: 100%;
    background: white;
    border-radius: 30px;
    padding: 20px 30px 30px 30px;
    box-shadow: 0 8px 30px #f3bbcfaa;
    display: flex;
    justify-content: space-between;
    user-select: none;
    position: relative;
    overflow: visible;
  }
  #left-col, #right-col {
    display: flex;
    flex-direction: column;
    gap: 25px;
    width: 40%;
    align-items: center;
  }
  .img-item {
    width: 130px;
    height: 130px;
    font-size: 70px;
    line-height: 1;
    border-radius: 18px;
    background: #ffe4f3;
    box-shadow: 0 2px 8px rgba(214, 58, 109, 0.35);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s, box-shadow 0.3s;
    position: relative;
  }
  .img-item.selected {
    box-shadow: 0 0 18px 5px #f99bbf;
    transform: scale(1.1);
    z-index: 10;
  }
  .img-item img {
    max-width: 115px;
    max-height: 115px;
    user-select: none;
    pointer-events: none;
  }
  #message {
    position: absolute;
    bottom: -70px;
    left: 50%;
    transform: translateX(-50%);
    font-weight: 800;
    font-size: 1.35rem;
    color: #d63a6d;
    user-select: none;
  }
  #canvas-lines {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    user-select: none;
    z-index: 10;
    overflow: visible;
  }
  .confetti-piece {
    position: fixed;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    opacity: 1;
    animation: fall 3s linear forwards;
  }
  @keyframes fall {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(100vh); opacity: 0; }
  }
  @media (max-width: 720px) {
    #game-container {
      flex-direction: column;
      align-items: center;
      gap: 40px;
      position: relative;
    }
    #left-col, #right-col {
      width: 100%;
      flex-direction: row;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      position: relative;
      z-index: 20;
    }
    .img-item {
      width: 100px; height: 100px;
      font-size: 50px;
      z-index: 21;
    }
    .img-item img {
      max-width: 80px; max-height: 80px;
    }
    #canvas-lines {
      z-index: 10;
      pointer-events: none;
    }
    #message {
      position: static;
      margin-top: 10px;
      transform: none;
      z-index: 22;
    }
    header {
      margin-top: 55px;
      font-size: 1.05rem;
    }
  }
</style>
</head>
<body>
<button id="btn-menu" aria-label="Voltar ao menu">MENU DE JOGOS</button>
<header>Musikids Fun, Jogo de Ligar Imagens</header>
<div id="game-container">
  <div id="left-col"></div>
  <svg id="canvas-lines"></svg>
  <div id="right-col"></div>
  <div id="message" aria-live="assertive" role="alert"></div>
</div>
<div id="confetti-container"></div>
<script>
// Biblioteca de pares do jogo (completo!)
const allPairs = [
  {left:"dog", leftImg: "ðŸ¶", right:"doghouse", rightImg:"ðŸ "},
  {left:"mouse", leftImg:"ðŸ­", right:"cheese", rightImg:"ðŸ§€"},
  {left:"cat", leftImg:"ðŸ±", right:"yarn", rightImg:"ðŸ§¶"},
  {left:"bird", leftImg:"ðŸ¦", right:"nest", rightImg:"ðŸª¹"},
  {left:"fish", leftImg:"ðŸŸ", right:"water", rightImg:"ðŸ’§"},
  {left:"turtle", leftImg:"ðŸ¢", right:"pond", rightImg:"ðŸžï¸"},
  {left:"frog", leftImg:"ðŸ¸", right:"lily", rightImg:"ðŸŒ¸"},
  {left:"cow", leftImg:"ðŸ„", right:"milk", rightImg:"ðŸ¥›"},
  {left:"horse", leftImg:"ðŸ´", right:"stable", rightImg:"ðŸ‡"},
  {left:"bee", leftImg:"ðŸ", right:"hive", rightImg:"ðŸ¯"},
  {left:"pig", leftImg:"ðŸ·", right:"mud", rightImg:"ðŸŸ¤"},
  {left:"rabbit", leftImg:"ðŸ°", right:"carrot", rightImg:"ðŸ¥•"},
  {left:"owl", leftImg:"ðŸ¦‰", right:"tree", rightImg:"ðŸŒ³"},
  {left:"duck", leftImg:"ðŸ¦†", right:"pond", rightImg:"ðŸŒŠ"},
  {left:"lion", leftImg:"ðŸ¦", right:"jungle", rightImg:"ðŸŒ´"},
  {left:"elephant", leftImg:"ðŸ˜", right:"waterhole", rightImg:"ðŸœï¸"},
  {left:"bear", leftImg:"ðŸ»", right:"forest", rightImg:"ðŸŒ²"},
  {left:"snake", leftImg:"ðŸ", right:"rock", rightImg:"ðŸª¨"},
  {left:"monkey", leftImg:"ðŸ’", right:"banana", rightImg:"ðŸŒ"},
  {left:"crown", leftImg:"ðŸ‘‘", right:"king", rightImg:"ðŸ¤´"},
  {left:"cat-face", leftImg:"ðŸ˜º", right:"box", rightImg:"ðŸ“¦"},
  {left:"dog-face", leftImg:"ðŸ•", right:"ball", rightImg:"âš½"},
  {left:"mouse-face", leftImg:"ðŸ€", right:"hole", rightImg:"ðŸ•³ï¸"},
  {left:"sheep", leftImg:"ðŸ‘", right:"wool", rightImg:"ðŸ§¶"},
  {left:"baby-chick", leftImg:"ðŸ¤", right:"egg", rightImg:"ðŸ¥š"},
  {left:"car", leftImg:"ðŸš—", right:"garage", rightImg:"ðŸ "},
  {left:"plane", leftImg:"âœˆï¸", right:"airport", rightImg:"ðŸ›«"},
  {left:"bicycle", leftImg:"ðŸš²", right:"helmet", rightImg:"â›‘ï¸"},
  {left:"fire", leftImg:"ðŸ”¥", right:"firefighter", rightImg:"ðŸš’"},
  {left:"book", leftImg:"ðŸ“–", right:"library", rightImg:"ðŸ›ï¸"},
  {left:"phone", leftImg:"ðŸ“±", right:"charger", rightImg:"ðŸ”Œ"},
  {left:"clock", leftImg:"â°", right:"alarm", rightImg:"ðŸ“¢"},
  {left:"camera", leftImg:"ðŸ“¸", right:"photo", rightImg:"ðŸ–¼ï¸"},
  {left:"hat", leftImg:"ðŸŽ©", right:"man", rightImg:"ðŸ‘¨"},
  {left:"poodle", leftImg:"ðŸ©", right:"groomer", rightImg:"âœ‚ï¸"},
  {left:"cat", leftImg:"ðŸˆ", right:"scratching post", rightImg:"ðŸªµ"},
  {left:"fox", leftImg:"ðŸ¦Š", right:"den", rightImg:"ðŸšï¸"},
  {left:"snowman", leftImg:"â˜ƒï¸", right:"snow", rightImg:"â„ï¸"},
  {left:"sun", leftImg:"â˜€ï¸", right:"beach", rightImg:"ðŸ–ï¸"},
  {left:"cloud", leftImg:"â˜ï¸", right:"rain", rightImg:"ðŸŒ§ï¸"},
  {left:"airplane", leftImg:"ðŸ›©ï¸", right:"pilot", rightImg:"ðŸ‘¨â€âœˆï¸"},
  {left:"rocket", leftImg:"ðŸš€", right:"space", rightImg:"ðŸŒŒ"},
  {left:"flower", leftImg:"ðŸŒ·", right:"garden", rightImg:"ðŸŒ»"},
  {left:"tree", leftImg:"ðŸŒ³", right:"forest", rightImg:"ðŸŒ²"},
  {left:"heart-eyes", leftImg:"ðŸ˜", right:"love", rightImg:"â¤ï¸"},
  {left:"guide-dog", leftImg:"ðŸ•â€ðŸ¦º", right:"leash", rightImg:"ðŸ¦®"},
  {left:"bull", leftImg:"ðŸ‚", right:"barn", rightImg:"ðŸšï¸"}
];
let usedPairs = [];
const leftCol = document.getElementById("left-col");
const rightCol = document.getElementById("right-col");
const canvas = document.getElementById("canvas-lines");
const message = document.getElementById("message");
const btnMenu = document.getElementById("btn-menu");
const confettiContainer = document.getElementById("confetti-container");
btnMenu.onclick = () => location.href = "../index.html";
let selectedLeft = null;
let selectedRight = null;
let lines = [];
let matchedCount = 0;
function startGame() {
  clearGame();
  matchedCount = 0;
  selectedLeft = null;
  selectedRight = null;
  message.textContent = "";
  usedPairs = getRandomPairs(5);
  renderItems();
}
function clearGame() {
  leftCol.innerHTML = "";
  rightCol.innerHTML = "";
  lines.forEach(line => line.remove());
  lines = [];
  clearCanvas();
}
function clearCanvas() {
  while (canvas.firstChild) {
    canvas.removeChild(canvas.firstChild);
  }
}
function getRandomPairs(n) {
  const pool = allPairs.filter(p => !usedPairs.some(up => up.left === p.left));
  let arr = shuffle(pool);
  if (arr.length < n) {
    usedPairs = [];
    arr = shuffle(allPairs);
  }
  return arr.slice(0, n);
}
function renderItems() {
  const leftItemsOrder = shuffle(usedPairs.slice());
  const rightItemsOrder = shuffle(usedPairs.slice());
  leftCol.innerHTML = "";
  rightCol.innerHTML = "";
  leftItemsOrder.forEach(pair => {
    const div = document.createElement("div");
    div.classList.add("img-item");
    div.textContent = pair.leftImg;
    div.dataset.key = pair.left;
    div.tabIndex = 0;
    div.onclick = () => selectLeft(div);
    leftCol.appendChild(div);
  });
  rightItemsOrder.forEach(pair => {
    const div = document.createElement("div");
    div.classList.add("img-item");
    div.textContent = pair.rightImg;
    div.dataset.key = pair.right;
    div.tabIndex = 0;
    div.onclick = () => selectRight(div);
    rightCol.appendChild(div);
  });
  updateLines();
}
function shuffle(array) {
  let currentIndex = array.length, randomIndex;
  while(currentIndex !== 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--; [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
  }
  return array;
}
function selectLeft(elem) {
  if(selectedLeft) {
    selectedLeft.classList.remove("selected");
  }
  selectedLeft = elem;
  elem.classList.add("selected");
  checkMatch();
}
function selectRight(elem) {
  if(selectedRight) {
    selectedRight.classList.remove("selected");
  }
  selectedRight = elem;
  elem.classList.add("selected");
  checkMatch();
}
function checkMatch() {
  if(selectedLeft && selectedRight) {
    const leftKey = selectedLeft.dataset.key;
    const rightKey = selectedRight.dataset.key;
    if(isMatch(leftKey, rightKey)) {
      drawLine(selectedLeft, selectedRight);
      message.textContent = "ParabÃ©ns! VocÃª acertou!";
      matchedCount++;
      selectedLeft.classList.add("matched");
      selectedRight.classList.add("matched");
      selectedLeft.onclick = null;
      selectedRight.onclick = null;
      clearSelection();
      if(matchedCount === usedPairs.length) {
        setTimeout(() => {
          confetti();
          message.textContent = "ðŸŽ‰ ParabÃ©ns! VocÃª ligou todos os pares! ðŸŽ‰";
        }, 350);
        setTimeout(() => { startGame(); message.textContent = ""; }, 3000);
      }
    } else {
      message.textContent = "Ops! Tente novamente!";
      setTimeout(() => {
        clearSelection();
        message.textContent = "";
      }, 1000);
    }
  }
}
function clearSelection() {
  if(selectedLeft) selectedLeft.classList.remove("selected");
  if(selectedRight) selectedRight.classList.remove("selected");
  selectedLeft = null;
  selectedRight = null;
}
function drawLine(leftEl, rightEl) {
  const line = document.createElementNS("http://www.w3.org/2000/svg","line");
  const rectLeft = leftEl.getBoundingClientRect();
  const rectRight = rightEl.getBoundingClientRect();
  const svgRect = canvas.getBoundingClientRect();
  let x1 = rectLeft.left + rectLeft.width/2 - svgRect.left;
  let y1 = rectLeft.top + rectLeft.height/2 - svgRect.top;
  let x2 = rectRight.left + rectRight.width/2 - svgRect.left;
  let y2 = rectRight.top + rectRight.height/2 - svgRect.top;
  line.setAttribute("x1", x1);
  line.setAttribute("y1", y1);
  line.setAttribute("x2", x2);
  line.setAttribute("y2", y2);
  line.setAttribute("stroke", "#d63a6d");
  line.setAttribute("stroke-width", "5");
  line.classList.add("connection-line");
  canvas.appendChild(line);
  lines.push(line);
}
function updateLines() {
  lines.forEach(line => line.remove());
  lines = [];
  let matchedLefts = document.querySelectorAll('.img-item.matched');
  matchedLefts.forEach(leftEl => {
    let key = leftEl.dataset.key;
    let rightEl = [...document.querySelectorAll('.img-item.matched')].find(el => el.dataset.key !== key && isMatch(leftEl.dataset.key, el.dataset.key));
    if(rightEl) drawLine(leftEl, rightEl);
  });
}
function isMatch(leftKey, rightKey) {
  return usedPairs.some(pair => (pair.left === leftKey && pair.right === rightKey));
}
function confetti() {
  confettiContainer.innerHTML = "";
  const colors = ['#ff597f','#ff9ea1','#fcd677','#a9d97a','#79d79a','#ff7eb9','#61dafb'];
  for(let i=0;i<150;i++) {
    const c = document.createElement("div");
    c.className="confetti-piece";
    c.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
    c.style.top = Math.random()*window.innerHeight + "px";
    c.style.left = Math.random()*window.innerWidth + "px";
    c.style.animationDelay = (i*0.02) + "s";
    confettiContainer.appendChild(c);
  }
  setTimeout(() => { confettiContainer.innerHTML = ""; }, 3500);
}
startGame();
</script>
</body>
</html>
