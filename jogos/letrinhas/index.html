<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo das Palavras</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Baloo 2', cursive, Arial;
      background: linear-gradient(135deg, #e5f7cb 0%, #ffced5 100%);
      color: #222;
      user-select: none;
      text-align: center;
      min-height: 100vh;
    }

    header {
      font-size: 2rem;
      padding: 1rem;
    }

    #main-container {
      max-width: 95vw;
      margin: 5rem auto 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 1rem;
    }

    #palavra-atual {
      font-size: clamp(1.2rem, 4vw, 1.7rem);
      padding: 0.8rem 2rem;
      margin-bottom: 1rem;
    }

    #slots-palavra {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.8rem;
      margin-bottom: 1rem;
    }

    .slot-letra {
      width: clamp(2.3rem, 9vw, 3.1rem);
      height: clamp(2.3rem, 9vw, 3.1rem);
      border: 2px dashed #666;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(1.3rem, 6vw, 2rem);
      background: #fff;
      border-radius: 10px;
    }

    #caixa-letras {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.6rem;
      margin-bottom: 1rem;
    }

    .letra-drag {
      background: #ffd966;
      border-radius: 8px;
      padding: 0.5rem 1.2rem;
      font-size: clamp(1rem, 4vw, 1.3rem);
      cursor: grab;
    }

    #resultado {
      margin: 1rem;
      font-size: clamp(1.2rem, 4vw, 1.6rem);
    }

    #next-btn, #reset-btn, #fullscreen-btn {
      margin: 0.5rem;
      font-size: clamp(1rem, 4vw, 1.2rem);
      padding: 0.6rem 2rem;
      border: none;
      border-radius: 8px;
      background: #77dd77;
      cursor: pointer;
    }

    #fullscreen-btn {
      background: #66a3ff;
      color: #fff;
    }

    #confetti {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 9999;
    }

    .confetti-piece {
      position: absolute;
      width: 8px; height: 8px;
      opacity: 0.8;
    }

    @media (max-width: 480px) {
      header {
        font-size: 1.6rem;
      }
      #btn-menu {
        font-size: 1rem;
        padding: 0.4rem 1rem;
      }
      input[type=text] {
        width: 70%;
      }
    }
  </style>
</head>
<body>
  <header>ðŸŽ¯ Jogo das Palavras</header>

  <div id="main-container">
    <div id="palavra-atual"></div>
    <div id="slots-palavra"></div>
    <div id="caixa-letras"></div>
    <div id="resultado"></div>
    <button id="next-btn">PrÃ³xima</button>
    <button id="reset-btn">Reiniciar</button>
    <button id="fullscreen-btn">Tela Cheia</button>
  </div>

  <div id="confetti"></div>

<script>
  let categorias = {
    animais: ["CACHORRO","GATO","ELEFANTE","TARTARUGA","COBRA","URSO"],
    frutas: ["BANANA","MELANCIA","LARANJA","ABACAXI","MORANGO","UVA"],
  };
  let categoriaAtual = "animais";
  let palavras = shuffle(categorias[categoriaAtual]);
  let indice = 0;

  function shuffle(array) {
    let arr = array.slice();
    for (let i=arr.length-1; i>0; i--) {
      let j = Math.floor(Math.random()*(i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function showWord() {
    document.getElementById("resultado").innerText = "";
    let palavra = palavras[indice];
    let slots = document.getElementById("slots-palavra");
    slots.innerHTML = "";
    for (let i=0; i<palavra.length; i++) {
      let slot = document.createElement("div");
      slot.className = "slot-letra";
      slot.dataset.correct = palavra[i];
      slot.ondrop = drop;
      slot.ondragover = allowDrop;
      slots.appendChild(slot);
    }
    let letras = palavra.split("");
    letras = shuffle(letras);
    let caixa = document.getElementById("caixa-letras");
    caixa.innerHTML = "";
    letras.forEach(l => {
      let span = document.createElement("div");
      span.className = "letra-drag";
      span.innerText = l;
      span.draggable = true;
      span.ondragstart = drag;
      caixa.appendChild(span);
    });
    document.getElementById("palavra-atual").innerText = "Monte a palavra:";
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.innerText);
    ev.target.style.opacity = "0.5";
  }

  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drop(ev) {
    ev.preventDefault();
    let letra = ev.dataTransfer.getData("text");
    if(ev.target.innerText === "") {
      ev.target.innerText = letra;
      let caixa = document.getElementById("caixa-letras");
      for(let child of caixa.children) {
        if(child.innerText === letra && child.style.opacity==="0.5") {
          child.remove();
          break;
        }
      }
    }
    checkWord();
  }

  function checkWord() {
    let slots = document.querySelectorAll(".slot-letra");
    let palavraFormada = "";
    slots.forEach(s => { palavraFormada += s.innerText; });
    if(palavraFormada.length === slots.length) {
      let correta = palavras[indice];
      if(palavraFormada === correta) {
        document.getElementById("resultado").innerText = "âœ… Correto!";
        confetti();
      } else {
        document.getElementById("resultado").innerText = "âŒ Tente novamente!";
      }
    }
  }

  document.getElementById("next-btn").onclick = () => {
    indice++;
    if(indice >= palavras.length) {
      indice = 0;
      palavras = shuffle(categorias[categoriaAtual]);
    }
    showWord();
  };

  document.getElementById("reset-btn").onclick = () => {
    showWord();
  };

  // ðŸ”¹ Tela cheia
  function openFullscreen() {
    let elem = document.documentElement;
    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) { /* Safari */
      elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) { /* IE11 */
      elem.msRequestFullscreen();
    }
  }

  document.getElementById("fullscreen-btn").onclick = () => {
    openFullscreen();
  };

  // ðŸ”¹ Ativa fullscreen automaticamente em celular
  if (/Mobi|Android/i.test(navigator.userAgent)) {
    window.addEventListener("load", () => {
      setTimeout(() => { openFullscreen(); }, 1000);
    });
  }

  function confetti() {
    const confettiContainer = document.getElementById('confetti');
    confettiContainer.innerHTML = '';
    const colors = ['#ff0','#0f0','#00f','#f0f','#0ff','#f00'];
    for(let i=0; i<100; i++) {
      let piece = document.createElement('div');
      piece.className = 'confetti-piece';
      piece.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
      piece.style.left = Math.random()*100 + 'vw';
      piece.style.top = '-10px';
      confettiContainer.appendChild(piece);
      let fall = piece.animate([
        { transform: 'translateY(0)', opacity:1 },
        { transform: 'translateY(100vh)', opacity:0 }
      ], {
        duration: Math.random()*2000+2000,
        easing: 'linear',
        iterations:1,
        delay: Math.random()*1000
      });
      fall.onfinish = () => { piece.remove(); };
    }
  }

  palavras = shuffle(categorias[categoriaAtual]);
  showWord();
</script>
</body>
</html>
