<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo das Letrinhas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: #f0f8ff;
    }

    h1 {
      font-size: 28px;
      margin: 15px 0;
      color: #333;
    }
    #menuButton {
      position: absolute;
      left: 10px;
      top: 10px;
      padding: 10px 15px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      background: linear-gradient(45deg, #ff4081, #7c4dff);
      color: white;
      cursor: pointer;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    }
    .menu {
      margin: 15px 0;
    }
    .menu button {
      padding: 10px 15px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(45deg, #4CAF50, #81c784);
      color: white;
      cursor: pointer;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    }

    .menu button:hover {
      transform: scale(1.05);
    }
    .game-container {
      padding: 15px;
    }
    #wordToCopy {
      font-size: 22px;
      margin: 15px 0;
      font-weight: bold;
      color: #333;
    }
    #letterBank, #dropZone {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 15px 0;
    }
    .letter {
      padding: 14px 18px;
      background: linear-gradient(135deg, #ffeb3b, #ffc107);
      border: 2px solid #333;
      border-radius: 50%;
      font-size: 20px;
      font-weight: bold;
      cursor: grab;
      user-select: none;
      touch-action: none;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
      transition: transform 0.2s, background 0.3s;
    }
    .letter:hover {
      transform: scale(1.1);
      background: linear-gradient(135deg, #ffe082, #ffca28);
    }
    .dropSlot {
      width: 50px;
      height: 50px;
      border: 2px dashed #aaa;
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      background: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    .dropSlot.filled {
      border: 2px solid #4CAF50;
      background: #e8f5e9;
    }
    input[type="text"] {
      padding: 10px;
      font-size: 18px;
      width: 80%;
      max-width: 300px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #aaa;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #4CAF50;
      color: white;
      cursor: pointer;
      margin: 10px 5px;
    }
    #message {
      margin-top: 15px;
      font-size: 18px;
      font-weight: bold;
    }
    @media (max-width: 600px) {
      #letterBank, #dropZone {
        gap: 6px;
      }
      .letter {
        font-size: 18px;
        padding: 12px 14px;
      }
      .dropSlot {
        width: 45px;
        height: 45px;
      }
    }
  </style>
</head>
<body>
  <button id="menuButton">Menu de Jogos</button>
  <h1>Jogo das Letrinhas</h1>

  <div class="menu">
    <button onclick="setCategory('animais')">Animais</button>
    <button onclick="setCategory('frutas')">Frutas</button>
    <button onclick="setCategory('objetos')">Objetos</button>
  </div>

  <div class="game-container">
    <p id="wordToCopy">Palavra: cachorro</p>

    <input type="text" id="customWord" placeholder="Digite a palavra que deseja">
    <button onclick="setCustomWord()">Usar Palavra</button>

    <div id="dropZone"></div>
    <div id="letterBank"></div>
    <button onclick="checkWord()">Verificar</button>
    <p id="message"></p>
  </div>

  <canvas id="confettiCanvas"></canvas>

  <script>
    let currentWord = "cachorro";
    const words = {
      animais: ["cachorro", "gato", "elefante", "leão", "tigre"],
      frutas: ["maçã", "banana", "uva", "laranja", "pera"],
      objetos: ["mesa", "cadeira", "computador", "bola", "livro"]
    };

    // Redireciona para o menu de jogos real
    document.getElementById("menuButton").onclick = function() {
      window.location.href = "../index.html"; // Ajuste para o caminho do seu menu principal
    };

    function setCategory(category) {
      const randomIndex = Math.floor(Math.random() * words[category].length);
      currentWord = words[category][randomIndex];
      setupGame();
    }

    function setCustomWord() {
      const input = document.getElementById("customWord").value.trim();
      if (input) {
        currentWord = input.toLowerCase();
        setupGame();
      }
    }

    function setupGame() {
      document.getElementById("wordToCopy").textContent = "Palavra: " + currentWord;

      const dropZone = document.getElementById("dropZone");
      dropZone.innerHTML = "";
      for (let i = 0; i < currentWord.length; i++) {
        let slot = document.createElement("div");
        slot.className = "dropSlot";
        slot.onclick = () => removeLetter(slot);
        slot.ondrop = drop;
        slot.ondragover = allowDrop;
        dropZone.appendChild(slot);
      }

      const letterBank = document.getElementById("letterBank");
      letterBank.innerHTML = "";
      let shuffled = currentWord.split("").sort(() => Math.random() - 0.5);
      shuffled.forEach((letter, index) => {
        let div = document.createElement("div");
        div.className = "letter";
        div.textContent = letter;
        div.id = "letter-" + index;
        div.draggable = true;
        div.ondragstart = drag;
        div.onclick = () => placeLetter(div);
        letterBank.appendChild(div);
      });

      document.getElementById("message").textContent = "";
    }

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.textContent);
      ev.dataTransfer.setData("id", ev.target.id);
    }

    function drop(ev) {
      ev.preventDefault();
      if (ev.target.classList.contains("dropSlot") && ev.target.textContent === "") {
        let letter = ev.dataTransfer.getData("text");
        let id = ev.dataTransfer.getData("id");
        ev.target.textContent = letter;
        ev.target.classList.add("filled");
        document.getElementById(id).remove();
      }
    }

    function placeLetter(div) {
      let slots = document.querySelectorAll(".dropSlot");
      for (let slot of slots) {
        if (slot.textContent === "") {
          slot.textContent = div.textContent;
          slot.classList.add("filled");
          div.remove();
          break;
        }
      }
    }

    function removeLetter(slot) {
      if (slot.textContent !== "") {
        let div = document.createElement("div");
        div.className = "letter";
        div.textContent = slot.textContent;
        div.draggable = true;
        div.ondragstart = drag;
        div.onclick = () => placeLetter(div);
        document.getElementById("letterBank").appendChild(div);

        slot.textContent = "";
        slot.classList.remove("filled");
      }
    }

    function checkWord() {
      let formedWord = "";
      document.querySelectorAll(".dropSlot").forEach(slot => {
        formedWord += slot.textContent;
      });
      if (formedWord === currentWord) {
        document.getElementById("message").textContent = "Parabéns! Você acertou!";
        document.getElementById("message").style.color = "green";
        startConfetti();
        setTimeout(() => {
          setCategory("animais");
        }, 3000);
      } else {
        document.getElementById("message").textContent = "Tente novamente!";
        document.getElementById("message").style.color = "red";
      }
    }

    // Confete animado
    const canvas = document.getElementById("confettiCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let confetti = [];
    function startConfetti() {
      confetti = [];
      for (let i = 0; i < 150; i++) {
        confetti.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * 10 + 10,
          color: `hsl(${Math.random() * 360}, 100%, 50%)`,
          tilt: Math.random() * 10 - 10
        });
      }
      animateConfetti();
      setTimeout(() => confetti = [], 3000);
    }

    function animateConfetti() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      confetti.forEach(c => {
        ctx.beginPath();
        ctx.arc(c.x, c.y, c.r, 0, 2 * Math.PI);
        ctx.fillStyle = c.color;
        ctx.fill();
      });
      updateConfetti();
      if (confetti.length > 0) requestAnimationFrame(animateConfetti);
    }

    function updateConfetti() {
      confetti.forEach(c => {
        c.y += c.d * 0.1;
        c.x += Math.sin(c.y * 0.05);
      });
    }

    setupGame();
  </script>
</body>
</html>
