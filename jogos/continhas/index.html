<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Continhas - MusiKids</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Baloo+2&display=swap');
  body {
    margin: 0; padding: 0;
    font-family: 'Baloo 2', cursive, Arial, sans-serif;
    background: linear-gradient(135deg, #f7f4e9, #ffe7f0);
    color: #444;
    user-select: none;
    display: flex; flex-direction: column; align-items: center;
    height: 100vh; box-sizing: border-box;
  }
  #btn-menu {
    position: fixed;
    top: 15px; left: 15px;
    background: #a1d578;
    color: #225318;
    border: none;
    border-radius: 20px;
    padding: 12px 18px;
    font-weight: 900;
    font-size: 1.25rem;
    cursor: pointer;
    box-shadow: 0 3px 16px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease;
    z-index: 1000;
  }
  #btn-menu:hover {
    background: #789a30;
    color: white;
  }
  header {
    font-size: 2.4rem;
    font-weight: 900;
    margin: 70px 0 10px 0;
    color: #de1e7e;
    text-align: center;
    user-select: none;
  }
  main {
    width: 100%;
    max-width: 540px;
    background: #fff;
    border-radius: 30px;
    padding: 30px 20px 36px 20px;
    box-shadow: 0 3px 20px rgba(255,183,216,0.5);
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  #simple-sum {
    font-size: 3.5rem;
    font-weight: 900;
    color: #27734b;
    text-align: center;
  }
  .answer-section {
    display: flex;
    gap: 10px;
    justify-content: center;
    align-items: center;
  }
  input[type=number] {
    width: 120px;
    font-size: 1.5rem;
    font-weight: 700;
    padding: 12px 18px;
    border-radius: 15px;
    border: 2px solid #8fd1a2;
    text-align: center;
    outline-offset: 3px;
  }
  button {
    font-family: 'Baloo 2', cursive, Arial, sans-serif;
    font-weight: 900;
    font-size: 1.3rem;
    padding: 12px 36px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s ease;
  }
  button:focus {
    outline: 4px solid #ff9ebd;
    outline-offset: 3px;
  }
  #check-answer {
    background: linear-gradient(90deg,#fb3f7a 0%,#fc8a96 98%);
    box-shadow: 0 0 15px #fb3f7aaa;
  }
  #check-answer:hover {
    background: linear-gradient(90deg,#e51254 0%,#ff638a 98%);
  }
  #new-sum, #create-sum {
    background: linear-gradient(90deg,#4eb87f 0%,#6ad89e 98%);
    box-shadow: 0 0 15px #4eb87faa;
  }
  #new-sum:hover, #create-sum:hover {
    background: linear-gradient(90deg,#249649 0%,#57db9a 98%);
  }
  #feedback {
    font-size: 1.8rem;
    font-weight: 900;
    text-align: center;
    min-height: 54px;
    color: #ba1282;
  }
  #create-area {
    margin-top: 30px;
    max-width: 360px;
    margin-left: auto;
    margin-right: auto;
    padding: 12px 16px;
    border-radius: 25px;
    background: #e0f3e5;
    box-shadow: 0 0 15px #58bf6944;
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    justify-content: center;
    align-items: center;
  }
  label {
    font-size: 1.3rem;
    font-weight: 700;
    color: #3e693e;
  }
  #create-area input, #create-area select {
    font-size: 1.2rem;
    padding: 8px 14px;
    border-radius: 14px;
    border: 2px solid #70c470;
    width: 100px;
  }
  
  #create-area select {
    width: 80px;
  }
  #confetti {
    position: fixed;
    width: 100vw;
    height: 100vh;
    top: 0; left: 0;
    pointer-events: none;
    z-index: 2000;
  }
  .confetti-piece {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    will-change: transform, opacity;
  }
</style>
</head>
<body>
  <button id="btn-menu" aria-label="Voltar ao menu">MENU DE JOGOS</button>
  <header>Jogo de Continhas - MusiKids Fun</header>
  <main>
    <div id="simple-sum" aria-live="polite" aria-atomic="true">0 + 0 = ?</div>
    <div class="answer-section">
      <input id="answer-input" type="number" aria-label="Digite a resposta" />
      <button id="check-answer" aria-label="Verificar resposta">Verificar</button>
      <button id="new-sum" aria-label="Nova conta">Nova Conta</button>
    </div>
    <div id="feedback"></div>
    <div id="create-area" aria-label="Crie sua própria conta">
      <label for="num1-input">Número 1:</label>
      <input id="num1-input" type="number" min="0" max="99" value="0" />
      <label for="operation-select">Operação:</label>
      <select id="operation-select" aria-label="Tipo de operação">
        <option value="+">+</option>
        <option value="-">−</option>
        <option value="*">×</option>
      </select>
      <label for="num2-input">Número 2:</label>
      <input id="num2-input" type="number" min="0" max="99" value="0" />
      <button id="create-sum" aria-label="Criar conta">Criar Conta</button>
    </div>
  </main>
  <div id="confetti"></div>

<script>
  const btnMenu = document.getElementById('btn-menu');
  btnMenu.onclick = () => window.location.href = '../';

  const sumDisplay = document.getElementById("simple-sum");
  const answerInput = document.getElementById("answer-input");
  const checkBtn = document.getElementById("check-answer");
  const newSumBtn = document.getElementById("new-sum");
  const feedback = document.getElementById("feedback");

  const num1Input = document.getElementById("num1-input");
  const num2Input = document.getElementById("num2-input");
  const operationSelect = document.getElementById("operation-select");
  const createSumBtn = document.getElementById("create-sum");

  let currentSum = null;

  function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function generateSum() {
    const op = ["+", "-", "*"][randomInt(0,2)];
    let num1 = randomInt(0,20);
    let num2 = randomInt(0,20);
    if(op === "-" && num2 > num1) [num1, num2] = [num2, num1];
    return {num1,num2,op};
  }

  function displaySum({num1, num2, op}) {
    sumDisplay.textContent = `${num1} ${op} ${num2} = ?`;
  }

  function computeAnswer({num1, num2, op}) {
    switch(op){
      case "+": return num1 + num2;
      case "-": return num1 - num2;
      case "*": return num1 * num2;
      default: return null;
    }
  }

  function confetti() {
    let container = document.getElementById('confetti');
    container.innerHTML = "";
    let colors = ['#ff6395','#fcee21','#33d68f','#7d69f9','#fd5a50'];
    for(let i=0; i<100; i++) {
      let span = document.createElement("span");
      span.className = "confetti-piece";
      span.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
      span.style.top = Math.random()*window.innerHeight + "px";
      span.style.left = Math.random()*window.innerWidth + "px";
      span.style.width = "12px";
      span.style.height = "12px";
      span.style.position = "absolute";
      span.style.borderRadius = "50%";
      span.style.animation = "fall 3s linear forwards";
      span.style.animationDelay = (i * 0.03) + "s";
      container.appendChild(span);
    }
    setTimeout(() => { container.innerHTML = ""; }, 3000);
  }

  document.body.insertAdjacentHTML('beforeend', `
    <style>
      @keyframes fall {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(100vh); opacity: 0; }
      }
    </style>
  `);

  let sum = null;

  function startNewSum() {
    sum = generateSum();
    displaySum(sum);
    answerInput.value = "";
    feedback.textContent = "";
    answerInput.focus();
  }

  checkBtn.onclick = () => {
    const val = parseInt(answerInput.value);
    if(isNaN(val)){
      feedback.textContent = "Por favor digite um número válido.";
      return;
    }
    const res = computeAnswer(sum);
    if(val === res) {
      feedback.textContent = "Parabéns, você acertou!";
      confetti();
      newSumBtn.focus();
      newSumBtn.disabled = true;
      checkBtn.disabled = true;
      answerInput.disabled = true;
    } else {
      feedback.textContent = "Ops, tente novamente!";
      answerInput.focus();
    }
  };

  newSumBtn.onclick = () => {
    checkBtn.disabled = false;
    answerInput.disabled = false;
    newSumBtn.disabled = true;
    startNewSum();
  };

  createSumBtn.onclick = () => {
    let n1 = parseInt(num1Input.value);
    let n2 = parseInt(num2Input.value);
    let op = operationSelect.value;
    if(isNaN(n1)|| isNaN(n2)){
      feedback.textContent = "Por favor digite números válidos.";
      return;
    }
    if(op === "-" && n2 > n1) [n1,n2] = [n2,n1];
    sum = {num1:n1, num2:n2, op:op};
    displaySum(sum);
    feedback.textContent = "";
    answerInput.value = "";
    answerInput.disabled = false;
    checkBtn.disabled = false;
    newSumBtn.disabled = false;
    answerInput.focus();
  };

  // Inicializa ao carregar
  window.onload = () => newSumBtn.click();
</script>
</body>
</html>
