<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Arraste as Formas - Geometria Divertida</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&family=Luckiest+Guy&display=swap');

:root {
  --neon-pink: #ff71ce;
  --neon-yellow: #fdf200;
  --neon-blue: #01cdfe;
  --neon-purple: #7c4dff;
  --soft-bg: #f7f4e9;
}

body {
  margin: 0; padding: 0;
  min-height: 100vh;
  font-family: 'Baloo 2', cursive, Arial, sans-serif;
  background: linear-gradient(135deg, var(--soft-bg), #f8b500, var(--neon-pink) 100%);
  color: #32434a;
  user-select: none;
  overflow-x: hidden;
  text-align: center;
}

/* --- Elementos GeomÃ©tricos Flutuantes no Fundo --- */
.bg-shape {
  position: fixed;
  z-index: -1;
  opacity: 0.2;
  animation: floatBG 25s infinite linear;
}

@keyframes floatBG {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-100px) rotate(180deg); }
  100% { transform: translateY(0) rotate(360deg); }
}

/* BotÃ£o Menu Estilizado */
#btn-menu {
  position: fixed;
  top: 18px; left: 18px;
  background: var(--neon-purple);
  color: white;
  border-radius: 18px;
  padding: 12px 25px;
  font-weight: 900;
  font-size: 1.1rem;
  box-shadow: 4px 4px 0px #4b2cb3;
  border: none;
  z-index: 10000;
  cursor: pointer;
  transition: 0.2s;
}
#btn-menu:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px #4b2cb3; }

.header-area { margin-top: 84px; margin-bottom: 20px; }

.site-title {
  font-family: 'Luckiest Guy', cursive;
  font-size: 2.8rem;
  color: white;
  text-shadow: 4px 4px 0px var(--neon-pink), 8px 8px 20px rgba(0,0,0,0.2);
  margin-bottom: 10px;
}

.instructions-title {
  font-size: 1.3rem;
  color: #595bc3;
  background: rgba(255,255,255,0.6);
  display: inline-block;
  padding: 5px 20px;
  border-radius: 20px;
  font-weight: 700;
}

#game-container {
  max-width: 900px;
  margin: 0 auto 40px;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px);
  border-radius: 40px;
  border: 6px solid white;
  box-shadow: 0 20px 50px rgba(0,0,0,0.1);
  padding: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#shapes-row, #drop-row {
  display: flex;
  flex-wrap: wrap;
  gap: 25px;
  justify-content: center;
  margin: 20px 0;
}

/* Estilo das Formas ArrastÃ¡veis */
.shape-draggable {
  width: 100px; height: 100px;
  background: white;
  border-radius: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: grab;
  box-shadow: 0 8px 0px rgba(0,0,0,0.1);
  transition: transform 0.2s, box-shadow 0.2s;
  position: relative;
}
.shape-draggable:hover { transform: scale(1.05) translateY(-5px); }
.shape-draggable.selected { border: 4px solid var(--neon-purple); box-shadow: 0 0 20px var(--neon-purple); }

.shape-svg { width: 70px; height: 70px; pointer-events: none; }
.shape-label { font-size: 14px; font-weight: bold; color: #444; margin-top: 2px; }

/* Estilo das Zonas de Encaixe */
.drop-zone {
  width: 100px; height: 100px;
  border: 4px dashed #ccc;
  border-radius: 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.03);
  transition: all 0.3s;
  position: relative;
}
.drop-zone.active { border-color: var(--neon-blue); background: rgba(1, 205, 254, 0.1); }
.drop-zone.correct { border-style: solid; border-color: #a1d578; background: #f0fff0; }

#result-text {
  font-size: 1.5rem;
  font-weight: 900;
  color: #d63a6d;
  margin-top: 20px;
  min-height: 40px;
}

/* AnimaÃ§Ãµes */
@keyframes bounceSuccess {
  0%, 100% { transform: scale(1) translate(-50%, -50%); }
  50% { transform: scale(1.2) translate(-42%, -42%); }
}

@media (max-width: 600px) {
  .site-title { font-size: 1.8rem; }
  #game-container { padding: 15px; width: 95%; }
  .shape-draggable, .drop-zone { width: 75px; height: 75px; }
  .shape-svg { width: 50px; height: 50px; }
  .shape-label { font-size: 11px; }
}
</style>
</head>
<body>

<svg class="bg-shape" style="top:10%; left:5%; width:80px;" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="#01cdfe"/></svg>
<svg class="bg-shape" style="bottom:20%; right:5%; width:100px;" viewBox="0 0 100 100"><rect x="20" y="20" width="60" height="60" fill="#fdf200" transform="rotate(15)"/></svg>
<svg class="bg-shape" style="top:40%; right:10%; width:60px;" viewBox="0 0 100 100"><polygon points="50,10 90,90 10,90" fill="#ff71ce"/></svg>

<button id="btn-menu">MENU</button>

<div class="header-area">
  <div class="site-title">Geometria Kids Fun</div>
  <div class="instructions-title">Encaixe as formas nos lugares certos! ðŸŒŸ</div>
</div>

<div id="game-container">
  <div id="shapes-row"></div>
  <div id="drop-row"></div>
  <div id="result-text"></div>
</div>

<div id="confetti"></div>

<script>
// Banco de Formas Expandido
const formasGeometricas = [
  { nome: 'square', label: 'Quadrado', cor: '#ff6b6b', svg: '<rect x="10" y="10" width="54" height="54" rx="10" />' },
  { nome: 'circle', label: 'CÃ­rculo', cor: '#4ecdc4', svg: '<circle cx="37" cy="37" r="30" />' },
  { nome: 'triangle', label: 'TriÃ¢ngulo', cor: '#45b7d1', svg: '<polygon points="37,10 10,65 64,65" />' },
  { nome: 'rectangle', label: 'RetÃ¢ngulo', cor: '#96ceb4', svg: '<rect x="7" y="22" width="60" height="30" rx="8" />' },
  { nome: 'star', label: 'Estrela', cor: '#feca57', svg: '<polygon points="37,5 46,30 72,30 51,46 59,71 37,56 15,71 23,46 2,30 28,30" />' },
  { nome: 'pentagon', label: 'PentÃ¡gono', cor: '#ff9ff3', svg: '<polygon points="37,8 68,30 56,66 18,66 6,30" />' },
  { nome: 'hexagon', label: 'HexÃ¡gono', cor: '#54a0ff', svg: '<polygon points="37,7 65,22 65,52 37,67 9,52 9,22" />' },
  { nome: 'diamond', label: 'Losango', cor: '#5f27cd', svg: '<polygon points="37,5 67,37 37,69 7,37" />' }
];

let formasAtuais = [];
let formaSelecionada = null;

const shapesRow = document.getElementById('shapes-row');
const dropRow = document.getElementById('drop-row');
const resultText = document.getElementById('result-text');

function shuffle(arr) { return [...arr].sort(() => Math.random() - 0.5); }

function criaJogo() {
  // Sorteia 4 formas do banco de 8
  formasAtuais = shuffle(formasGeometricas).slice(0, 4);
  
  shapesRow.innerHTML = '';
  dropRow.innerHTML = '';
  resultText.textContent = 'Vamos comeÃ§ar!';

  // Gerar Origem (Embaralhado)
  shuffle(formasAtuais).forEach(forma => {
    const div = document.createElement('div');
    div.className = 'shape-draggable';
    div.draggable = true;
    div.dataset.type = forma.nome;
    div.innerHTML = `
      <svg class="shape-svg" viewBox="0 0 74 74" fill="${forma.cor}">${forma.svg}</svg>
      <div class="shape-label">${forma.label}</div>
    `;

    // Eventos Drag
    div.addEventListener('dragstart', (e) => {
      e.dataTransfer.setData('text', forma.nome);
      div.style.opacity = '0.4';
    });
    div.addEventListener('dragend', () => div.style.opacity = '1');

    // Evento Click (Mobile)
    div.addEventListener('click', () => {
      document.querySelectorAll('.shape-draggable').forEach(s => s.classList.remove('selected'));
      formaSelecionada = div;
      div.classList.add('selected');
    });

    shapesRow.appendChild(div);
  });

  // Gerar Destino (Embaralhado de novo para nÃ£o ficar na mesma ordem da origem)
  shuffle(formasAtuais).forEach(forma => {
    const zone = document.createElement('div');
    zone.className = 'drop-zone';
    zone.dataset.type = forma.nome;
    zone.innerHTML = `<svg class="shape-svg" viewBox="0 0 74 74" fill="${forma.cor}" opacity="0.2">${forma.svg}</svg>`;

    zone.addEventListener('dragover', (e) => {
      e.preventDefault();
      zone.classList.add('active');
    });
    zone.addEventListener('dragleave', () => zone.classList.remove('active'));
    zone.addEventListener('drop', (e) => {
      e.preventDefault();
      const type = e.dataTransfer.getData('text');
      handleMatch(type, zone);
    });

    zone.addEventListener('click', () => {
      if(formaSelecionada) handleMatch(formaSelecionada.dataset.type, zone);
    });

    dropRow.appendChild(zone);
  });
}

function handleMatch(draggedType, zone) {
  if (draggedType === zone.dataset.type && !zone.classList.contains('correct')) {
    const originalShape = document.querySelector(`.shape-draggable[data-type="${draggedType}"]`);
    
    zone.classList.remove('active');
    zone.classList.add('correct');
    zone.innerHTML = originalShape.innerHTML;
    
    // Centraliza a forma dentro do slot
    const svg = zone.querySelector('svg');
    svg.style.opacity = "1";
    svg.style.position = "absolute";
    svg.style.top = "50%";
    svg.style.left = "50%";
    svg.style.transform = "translate(-50%, -50%)";
    svg.style.animation = "bounceSuccess 0.5s ease";

    originalShape.style.visibility = 'hidden';
    formaSelecionada = null;
    
    checkWin();
  } else {
    zone.style.animation = 'shake 0.4s';
    setTimeout(() => zone.style.animation = '', 400);
  }
}

function checkWin() {
  const correct = document.querySelectorAll('.drop-zone.correct').length;
  if (correct === 4) {
    resultText.textContent = "ðŸŒŸ PARABÃ‰NS! VOCÃŠ Ã‰ DEMAIS! ðŸŒŸ";
    setTimeout(criaJogo, 4000);
  } else {
    resultText.textContent = `Muito bem! Faltam ${4 - correct}...`;
  }
}

window.onload = criaJogo;
</script>
</body>
</html>
