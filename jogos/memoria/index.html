<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jogo da Mem√≥ria - MusiKids Fun</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Baloo+2&display=swap');

  body {
    margin: 0; padding: 1.5rem;
    min-height: 100vh;
    background: linear-gradient(135deg, #AAFFA9 0%, #11FFBD 100%);
    font-family: 'Baloo 2', cursive, Arial, sans-serif;
    text-align: center;
    user-select: none;
  }
  h1 {
    color: #2d6a4f;
    margin-bottom: 1.4rem;
  }
  #game-board {
    width: 340px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(4, 70px);
    grid-gap: 15px;
  }
  .card {
    width: 70px;
    height: 90px;
    background: white;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    perspective: 800px;
  }
  .card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
  }
  .flipped .card-inner {
    transform: rotateY(180deg);
  }
  .front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 12px;
    backface-visibility: hidden;
  }
  .front {
    background: #2d6a4f;
  }
  .back {
    background: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5rem;
    color: #2d6a4f;
  }
</style>
</head>
<body>
<h1>üÉè Jogo da Mem√≥ria</h1>
<div id="game-board" role="grid" aria-label="Tabuleiro do jogo da mem√≥ria"></div>
<script>
  const icons = ['üê∂', 'üê±', 'ü¶ä', 'üê∞', 'üê∏', 'üêµ', 'üêº', 'üê®'];
  let cards = [...icons, ...icons]; // dois pares de cada

  const board = document.getElementById('game-board');
  let firstCard = null;
  let secondCard = null;
  let lockBoard = false;
  let matches = 0;

  function shuffle(array) {
    for (let i=array.length -1; i > 0; i--) {
      const j = Math.floor(Math.random()*(i+1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function createCard(icon) {
    const card = document.createElement('div');
    card.classList.add('card');
    card.setAttribute('tabindex', '0');
    const inner = document.createElement('div');
    inner.classList.add('card-inner');

    const front = document.createElement('div');
    front.classList.add('front');

    const back = document.createElement('div');
    back.classList.add('back');
    back.textContent = icon;

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);

    card.addEventListener('click', () => flipCard(card));
    card.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' ') {
        flipCard(card);
      }
    });
    return card;
  }

  function flipCard(card) {
    if(lockBoard || card.classList.contains('flipped') || card===firstCard) return;
    card.classList.add('flipped');
    if(!firstCard) {
      firstCard = card;
      return;
    }
    secondCard = card;
    checkForMatch();
  }

  function checkForMatch() {
    const icon1 = firstCard.querySelector('.back').textContent;
    const icon2 = secondCard.querySelector('.back').textContent;
    if(icon1 === icon2) {
      matches++;
      resetSelection();
      if(matches === icons.length) {
        setTimeout(() => alert('üéâ Parab√©ns! Voc√™ encontrou todos os pares!'), 300);
      }
    } else {
      lockBoard = true;
      setTimeout(() => {
        firstCard.classList.remove('flipped');
        secondCard.classList.remove('flipped');
        resetSelection();
      }, 800);
    }
  }

  function resetSelection() {
    [firstCard, secondCard] = [null, null];
    lockBoard = false;
  }

  function startGame() {
    matches = 0;
    board.innerHTML = '';
    shuffle(cards);
    cards.forEach(icon => {
      const card = createCard(icon);
      board.appendChild(card);
    });
  }

  window.onload = startGame;
</script>
</body>
</html>
